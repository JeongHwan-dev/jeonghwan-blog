---
description:
globs:
alwaysApply: true
---

# Next.js 사용 가이드라인

## 역할

- 이 규칙의 역할은 Next.js 프로젝트에서 고품질의 TypeScript 코드를 작성하도록 지원하는 것입니다.
- TypeScript, Node.js, Next.js App Router, React, Shadcn UI, Radix UI, Tailwind CSS를 활용한 현대적인 웹 애플리케이션 개발을 돕습니다.
- 코드 품질, 성능, 유지보수성을 최우선으로 하여, 확장 가능하고 최적화된 애플리케이션 작성을 지원합니다.

## 참고할 원칙 및 체크리스트

### 1. UI 및 스타일링

- 핵심 원칙: Shadcn UI, Radix, Tailwind를 활용하여 일관되고 접근성 높은 UI를 구현한다.

#### 1-1. UI 라이브러리 사용

- 핵심 원칙: 컴포넌트와 스타일링에는 Shadcn UI, Radix, Tailwind를 사용한다.
- 체크리스트:
  - Shadcn UI 컴포넌트를 우선적으로 사용했는지
  - 커스텀 스타일에 Tailwind를 사용했는지
  - CSS-in-JS를 피했는지

#### 1-2. 반응형 디자인

- 핵심 원칙: Tailwind CSS로 반응형 디자인을 구현하고, 모바일 우선 접근 방식을 사용한다.
- 체크리스트:
  - 모바일 우선으로 스타일을 작성했는지
  - Tailwind의 반응형 접두사를 사용했는지 (sm:, md:, lg:)
  - 불필요한 미디어 쿼리를 피했는지

---

### 2. 성능 최적화

- 핵심 원칙: React Server Components를 최대한 활용하고, 클라이언트 사이드 렌더링을 최소화한다.

#### 2-1. 서버 컴포넌트 우선

- 핵심 원칙: 'use client', 'useEffect', 'setState' 사용을 최소화하고, React Server Components(RSC)를 선호한다.
- 체크리스트:
  - 기본적으로 서버 컴포넌트를 사용했는지
  - 'use client'가 정말 필요한 경우에만 사용했는지
  - 데이터 페칭을 서버에서 수행했는지

#### 2-2. Suspense 활용

- 핵심 원칙: 클라이언트 컴포넌트는 fallback과 함께 Suspense로 감싼다.
- 체크리스트:
  - 비동기 컴포넌트를 Suspense로 감쌌는지
  - 적절한 fallback UI를 제공했는지

#### 2-3. 동적 로딩

- 핵심 원칙: 중요하지 않은 컴포넌트에는 동적 로딩을 사용한다.
- 체크리스트:
  - 큰 컴포넌트를 동적으로 로드했는지
  - 초기 번들 크기를 최소화했는지

#### 2-4. 이미지 최적화

- 핵심 원칙: WebP 형식 사용, 크기 데이터 포함, 지연 로딩을 구현한다.
- 체크리스트:
  - Next.js Image 컴포넌트를 사용했는지
  - width와 height를 명시했는지
  - 적절한 loading 전략을 사용했는지

---

### 3. 주요 규칙

#### 3-1. URL 상태 관리

- 핵심 원칙: URL 검색 파라미터 상태 관리에는 'nuqs'를 사용한다.
- 체크리스트:
  - URL 상태 관리에 nuqs를 사용했는지
  - useState 대신 URL 파라미터를 활용했는지

#### 3-2. Web Vitals 최적화

- 핵심 원칙: LCP, CLS, FID를 최적화한다.
- 체크리스트:
  - 이미지 최적화를 수행했는지
  - 레이아웃 시프트를 최소화했는지
  - 인터랙티브 시간을 개선했는지

#### 3-3. 'use client' 사용 제한

- 핵심 원칙: 서버 컴포넌트와 Next.js SSR을 선호하고, 'use client'는 꼭 필요한 경우에만 사용한다.
- 체크리스트:
  - 'use client'가 정말 필요한지 검토했는지
  - 작은 단위의 컴포넌트에만 적용했는지
  - 데이터 페칭에 사용하지 않았는지

---

### 4. Next.js 공식 문서 준수

- Data Fetching, Rendering, Routing에 대해서는 Next.js 공식 문서를 따릅니다.
- 최신 Next.js 버전의 모범 사례를 적용합니다.
- App Router 패턴을 우선적으로 사용합니다.
